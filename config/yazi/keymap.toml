# =============================================================================
# Yazi Keymap - Custom vim-like bindings
# Yazi 26.x+ format (używa [mgr] zamiast [manager])
# =============================================================================
# WAŻNE: Używamy TYLKO prepend_keymap aby DODAĆ do domyślnych skrótów
# NIE używamy keymap = [...] bo to NADPISUJE wszystkie domyślne!
# =============================================================================

[mgr]
prepend_keymap = [
    # =========================================================================
    # WIDOK (linemode) - V jako prefix
    # =========================================================================
    { on = ["V", "s"], run = "linemode size", desc = "View: size" },
    { on = ["V", "m"], run = "linemode mtime", desc = "View: modified time" },
    { on = ["V", "b"], run = "linemode btime", desc = "View: created time" },
    { on = ["V", "p"], run = "linemode permissions", desc = "View: permissions" },
    { on = ["V", "o"], run = "linemode owner", desc = "View: owner (user:group)" },
    { on = ["V", "n"], run = "linemode none", desc = "View: none" },

    # =========================================================================
    # SORTOWANIE - Shift+S jako prefix
    # =========================================================================
    { on = ["S", "a"], run = "sort alphabetical --dir-first", desc = "Sort: A-Z" },
    { on = ["S", "A"], run = "sort alphabetical --reverse --dir-first", desc = "Sort: Z-A" },
    { on = ["S", "n"], run = "sort natural --dir-first", desc = "Sort: natural (1,2,10)" },
    { on = ["S", "N"], run = "sort natural --reverse --dir-first", desc = "Sort: natural (desc)" },
    { on = ["S", "s"], run = "sort size --dir-first", desc = "Sort: by size (asc)" },
    { on = ["S", "S"], run = "sort size --reverse --dir-first", desc = "Sort: by size (desc)" },
    { on = ["S", "m"], run = "sort mtime --dir-first", desc = "Sort: by modified (oldest)" },
    { on = ["S", "M"], run = "sort mtime --reverse --dir-first", desc = "Sort: by modified (newest)" },
    { on = ["S", "b"], run = "sort btime --dir-first", desc = "Sort: by created (oldest)" },
    { on = ["S", "B"], run = "sort btime --reverse --dir-first", desc = "Sort: by created (newest)" },
    { on = ["S", "e"], run = "sort extension --dir-first", desc = "Sort: by extension" },
    { on = ["S", "E"], run = "sort extension --reverse --dir-first", desc = "Sort: by extension (desc)" },
    { on = ["S", "r"], run = "sort random --dir-first", desc = "Sort: random" },
    { on = ["S", "0"], run = "sort none", desc = "Sort: reset (none)" },

    # =========================================================================
    # PANELE I TABY
    # =========================================================================
    { on = "<F2>", run = "plugin --sync toggle-pane max-preview", desc = "Maximize preview" },
    { on = "<F3>", run = "plugin --sync toggle-pane min-parent", desc = "Toggle parent" },
    { on = "T", run = "plugin --sync toggle-pane min-preview", desc = "Toggle preview" },

    # =========================================================================
    # ODSWIEZANIE I WIDOCZNOSC
    # =========================================================================
    { on = "R", run = "refresh", desc = "Refresh directory" },
    { on = "H", run = "hidden toggle", desc = "Toggle hidden files" },

    # =========================================================================
    # NAWIGACJA - nadpisania domyślnych (K/J = 5 linii)
    # =========================================================================
    { on = "K", run = "arrow -5", desc = "Move cursor up 5 lines" },
    { on = "J", run = "arrow 5", desc = "Move cursor down 5 lines" },

    # =========================================================================
    # SZYBKIE SKOKI - g jako prefix
    # =========================================================================
    { on = ["g", "h"], run = "cd ~", desc = "Go to home" },
    { on = ["g", "i"], run = "plugin lazygit", desc = "Open Lazygit" },
    { on = ["g", "c"], run = "cd ~/.config", desc = "Go to config" },
    { on = ["g", "d"], run = "cd ~/Downloads", desc = "Go to downloads" },
    { on = ["g", "D"], run = "cd ~/Desktop", desc = "Go to desktop" },
    { on = ["g", "p"], run = "cd ~/GIT", desc = "Go to projects (GIT)" },
    { on = ["g", "n"], run = "cd ~/GIT/NovaMRP", desc = "Go to NovaMRP" },

    # =========================================================================
    # PLUGINY
    # =========================================================================
    # Jump-to-char (szybkie skakanie do pliku po literze - jak f w Vim)
    { on = "f", run = "plugin jump-to-char", desc = "Jump to char" },

    # Smart-enter (inteligentne Enter - otwiera pliki, wchodzi do katalogów)
    { on = "l", run = "plugin --sync smart-enter", desc = "Smart enter" },
    { on = "<Right>", run = "plugin --sync smart-enter", desc = "Smart enter" },
    { on = "<Enter>", run = "plugin --sync smart-enter", desc = "Smart enter" },

    # Bookmarks (zakładki)
    { on = "m", run = "plugin bookmarks save", desc = "Save bookmark" },
    { on = "'", run = "plugin bookmarks jump", desc = "Jump to bookmark" },
    { on = ["b", "d"], run = "plugin bookmarks delete", desc = "Delete bookmark" },
    { on = ["b", "D"], run = "plugin bookmarks delete_all", desc = "Delete all bookmarks" },

    # Chmod (zmiana uprawnień pliku)
    { on = ["c", "m"], run = "plugin chmod", desc = "Change permissions (chmod)" },

    # Compress / Extract
    { on = ["c", "z"], run = "plugin compress", desc = "Compress selected files" },
    { on = ["c", "x"], run = "plugin extract", desc = "Extract archive here" },
    { on = ["c", "X"], run = "plugin extract --hovered", desc = "Extract hovered archive" },

    # Diff (porównanie dwóch plików) - nadpisuje domyślny Ctrl+d (scroll down)
    { on = "<C-d>", run = "plugin diff", desc = "Diff with hovered file" },

    # Open-with-cmd (otwórz z dowolną komendą)
    { on = ["o", "c"], run = "plugin open-with-cmd", desc = "Open with custom command" },

    # Mount (zarządzanie dyskami - macOS)
    { on = "M", run = "plugin mount", desc = "Mount/unmount disks" },

    # FZF (fuzzy find)
    { on = "F", run = "plugin fzf", desc = "Fuzzy find" },

    # Zoxide (szybki skok do katalogów)
    { on = "Z", run = "plugin zoxide", desc = "Zoxide jump" },

    # Filter (filtrowanie widocznych plików - np. wpisz *.py)
    { on = "/", run = "filter --smart", desc = "Filter files" },

    # =========================================================================
    # SZUKANIE
    # =========================================================================
    # find = interaktywne szukanie w bieżącym katalogu (incremental)
    { on = "n", run = "find_arrow", desc = "Find: next match" },
    { on = "N", run = "find_arrow --previous", desc = "Find: previous match" },

    # search = rekurencyjne szukanie (fd/rg/rga)
    { on = ["s", "f"], run = "search --via=fd", desc = "Search: files by name (fd)" },
    { on = ["s", "c"], run = "search --via=rg", desc = "Search: file contents (rg)" },
    { on = ["s", "a"], run = "search --via=rga", desc = "Search: archives too (rga)" },
    { on = ["s", "q"], run = "escape --search", desc = "Search: quit/clear results" },

    # =========================================================================
    # WIDOK - z jako prefix (dodatkowe)
    # =========================================================================
    { on = ["z", "z"], run = "linemode size", desc = "Linemode: size" },
    { on = ["z", "m"], run = "linemode mtime", desc = "Linemode: mtime" },
    { on = ["z", "b"], run = "linemode btime", desc = "Linemode: btime" },
    { on = ["z", "p"], run = "linemode permissions", desc = "Linemode: permissions" },
    { on = ["z", "o"], run = "linemode owner", desc = "Linemode: owner" },
    { on = ["z", "n"], run = "linemode none", desc = "Linemode: none" },

    # =========================================================================
    # SHELL - dodatkowe skróty
    # =========================================================================
    { on = "!", run = "shell --interactive", desc = "Run shell command" },
    { on = ":", run = "shell --interactive", desc = "Run shell command" },

    # =========================================================================
    # KOPIOWANIE ŚCIEŻKI - c jako prefix
    # =========================================================================
    { on = ["c", "c"], run = "copy path", desc = "Copy path" },
    { on = ["c", "d"], run = "copy dirname", desc = "Copy dirname" },
    { on = ["c", "f"], run = "copy filename", desc = "Copy filename" },
    { on = ["c", "n"], run = "copy name_without_ext", desc = "Copy name without ext" },

    # =========================================================================
    # POMOC
    # =========================================================================
    { on = "?", run = "help", desc = "Show keybindings help" },
]

# =============================================================================
# Pozostałe sekcje - używamy prepend_keymap tylko dla nadpisań
# Domyślne bindingi yazi pozostają aktywne!
# =============================================================================

[tasks]
prepend_keymap = [
    { on = "x", run = "cancel", desc = "Cancel task" },
]

[pick]
# Używa domyślnych bindingów yazi

[input]
# Używa domyślnych bindingów yazi + małe dodatki
prepend_keymap = [
    { on = "<C-h>", run = "backspace", desc = "Backspace (vim-style)" },
]

[confirm]
# Używa domyślnych bindingów yazi

[cmp]
# Używa domyślnych bindingów yazi

[help]
# Używa domyślnych bindingów yazi
